<!DOCTYPE html>
<html lang="en">
   <head>
      <title>Bootstrap Example</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/vue"></script>
      <style>
         body{
         font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif
         }
         .navbar-brand img {
         position: absolute;
         top: -10px;
         width: 68px;
         }   
      </style>
   </head>
   <body>
      <div id="all">
      <!-- NAVIGATION BAR -->
      <section id="navigation_bar">
         <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
               <div class="navbar-header">
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span> 
                  </button>
                  <a class="navbar-brand" href="#"><img src='./assets/logo.png'></a>
               </div>
               <div class="collapse navbar-collapse" id="myNavbar">
                  <ul class="nav navbar-nav navbar-right">
                     <li><a>
                        <button type="button" class="btn btn-lg btn-sm" data-toggle="modal" data-target="#myModal">
                        <span class="badge">{{ totalItems }}</span>
                        <span class="glyphicon glyphicon-shopping-cart"></span> &nbsp; CART 
                        </button>
                        </a>
                     </li>
                     <li><a href="#contact">CONTACT</a></li>
                     <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <span class="glyphicon glyphicon-search"></span></span>
                        </a>
                        <ul class="dropdown-menu">
                           <li><a href="#">Two Bedroom</a></li>
                           <li><a href="#">Three Bedroom</a></li>
                           <li><a href="#">Four Bedroom</a></li>
                        </ul>
                     </li>
                  </ul>
               </div>
            </div>
         </nav>
      </section>
      <!-- Modal -->
      <section id="myModal" class="modal fade" role="dialog">
         <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
               <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Your shopping cart</h4>
               </div>
               <div class="modal-body">
                  <!-- SHOPPING CART -->
                  <section id="shoppingcart">
                     <div class="container">
                        <div class="row" v-for="(item, index) in cart">
                           <div class="col-md-3">
                              <ul class="list-unstyled">
                                 <template>
                                    <li v-if="index % 2 ===0">Qty: {{ item }}</li>
                                    <li v-else-if="index % 2 !==0">
                                       Tower: {{ item.tower }} <br>
                                       Type: {{ item.type }} <br>
                                       Floor: {{ item.floor }} <br>
                                       Price: ${{ item.price }} K<br><br>
                                       Total Price: ${{ item.totalPrice }} K<br><br>
                                       <button type="button" class="btn btn-danger" v-on:click="removeFromCart(item)">Remove from cart</button>
                                       <hr>
                                    </li>
                                 </template>
                              </ul>
                           </div>
                           <div><a target="_blank" v-bind:href="item.image"><img v-bind:src="item.image" style="width:250px"></a>
                           </div>
                        </div>
                        <h3>Grand Total: ${{ grandTotal }}</h3>
                     </div>
                  </section>
               </div>
               <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
               </div>
            </div>
         </div>
      </section>
      <section id="categories">
         <div class="container">
            <h2>Carousel Example</h2>
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
               <!-- Indicators -->
               <ol class="carousel-indicators">
                  <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                  <li data-target="#myCarousel" data-slide-to="1"></li>
                  <li data-target="#myCarousel" data-slide-to="2"></li>
               </ol>
               <!-- Wrapper for slides -->
               <div class="carousel-inner">
                  <div class="item active">
                     <img src="http://theizzara.com/upload/sliderImage/izzara-slider-4-6c611.jpg" alt="RESIDENTIAL" width="1200" height="700">
                     <div class="carousel-caption">
                        <h3>A sanctuary in the middle of the city</h3>
                        <p></p>
                     </div>
                  </div>
                  <div class="item">
                     <img src="http://theizzara.com/upload/sliderImage/hello-slider-3bcfa.jpg" alt="OFFICE" width="1200" height="700">
                     <div class="carousel-caption">
                        <h3>The eco-friendly high-rise</h3>
                        <p></p>
                     </div>
                  </div>
                  <div class="item">
                     <img src="http://theizzara.com/upload/sliderImage/hello-slider-2-47838.jpg" alt="RETAIL" width="1200" height="700">
                     <div class="carousel-caption">
                        <h3>Your home truly...</h3>
                        <p></p>
                     </div>
                  </div>
               </div>
               <!-- Left and right controls -->
               <a class="left carousel-control" href="#myCarousel" data-slide="prev">
               <span class="glyphicon glyphicon-chevron-left"></span>
               <span class="sr-only">Previous</span>
               </a>
               <a class="right carousel-control" href="#myCarousel" data-slide="next">
               <span class="glyphicon glyphicon-chevron-right"></span>
               <span class="sr-only">Next</span>
               </a>
            </div>
         </div>
      </section>
      <!-- Toggle Tabs -->
      <section class="toggle-tabs text-center">
         <h3>Hacktiv Heights Collection </h3>
         <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#menu1">Three Bedroom</a></li>
            <li><a data-toggle="tab" href="#menu2">Four Bedroom</a></li>
         </ul>
      </section>
      <section class="tab-content">
         <div id="menu1" class="tab-pane fade in active">
            <!-- THREE BEDROOM -->
            <section id="three-bedroom">
               <div class="container text-center">
                  <h3>Three Bedroom Selection</h3>
                  <div class="row">
                     <div class="col-sm-4" v-for="product in three_bedroom.products">
                        <p><strong>Type {{ product.type }}</strong></p>
                        <br>
                        <a v-bind:href=`#${product.id}` data-toggle="collapse">
                        <img :src="product.image" height="255" width="255">
                        </a>
                        <div :id="product.id" class="collapse text-left">
                           <ol class="list-unstyled text-left">
                              <br>
                              <li>{{ product.tower }}</li>
                              <li>{{ product.floor }}</li>
                              <li>{{ product.lift  }}</li>
                              <li>{{ product.bed   }} Beds</li>
                              <li>{{ product.bath  }} Baths</li>
                              <li>{{ product.sqm   }} sqm</li>
                              <li>$ {{ product.price }} K</li>
                              <br>
                              <li class="text-center"><input type="submit"class="btn btn-success" value="Add to cart" v-on:click="addToCart(product)"></li>
                           </ol>
                        </div>
                     </div>
                  </div>
               </div>
            </section>
         </div>
         <div id="menu2" class="tab-pane fade">
         <section id="four-bedroom">
            <div class="container text-center">
               <h3>Four Bedroom</h3>
               <div class="row">
                  <div class="col-sm-3" v-for="product in four_bedroom.products">
                     <p><strong>Type {{ product.type }}</strong></p>
                     <br>
                     <a v-bind:href=`#${product.id}` data-toggle="collapse">   
                     <img :src="product.image" height="255" width="255">
                     </a>
                     <div :id="product.id" class="collapse text-left">
                        <ol class="list-unstyled text-left">
                           <br>
                           <li>{{ product.tower }}</li>
                           <li>{{ product.floor }}</li>
                           <li>{{ product.lift  }}</li>
                           <li>{{ product.bed   }} Beds</li>
                           <li>{{ product.bath  }} Baths</li>
                           <li>{{ product.sqm   }} sqm</li>
                           <li>$ {{ product.price }} K</li>
                           <br>
                           <li class="text-center"><input type="submit" class="btn btn-success" value="Add to cart" v-on:click="addToCart(product)"></li>
                        </ol>
                     </div>
                  </div>
               </div>
         </section>
         </div>
      </section>
      <!-- CONTACT -->
      <section id="contact">
         <div class="container">
            <h3 class="text-center">Contact</h3>
            <div class="row test">
               <div class="col-md-4">
                  <p>
                     <span class="glyphicon glyphicon-map-marker"></span> 
                     &nbsp;
                     Jakarta, Indonesia
                  </p>
                  <p>
                     <span class="glyphicon glyphicon-phone"></span> 
                     &nbsp;
                     Phone: +62-8888-9999
                  </p>
                  <p>
                     <span class="glyphicon glyphicon-envelope"></span> 
                     &nbsp;
                     Email: hacktivheights.com
                  </p>
               </div>
               <div class="col-md-8">
                  <div class="row">
                     <div class="col-sm-6 form-group">
                        <input class="form-control" id="name" name="name" placeholder="Name" type="text" required>
                     </div>
                     <div class="col-sm-6 form-group">
                        <input class="form-control" id="email" name="email" placeholder="Email" type="email" required>
                     </div>
                  </div>
                  <textarea class="form-control" id="comments" name="comments" placeholder="Comment" rows="5"></textarea>
                  <div class="row">
                     <div class="col-md-12 form-group">
                        <button class="btn pull-right" type="submit">Send</button>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>
   </body>
   <footer></footer>
   <script>
      const all = new Vue({
        el:"#all",
        data:{
          three_bedroom:{
           products:[
            {
            id:"three1",
            image: 'http://theizzara.com/images/layout-s3b1.jpg',
            type: 'A',
            tower: 'Izzara South',
            floor: 'Suites Floor',
            lift: 'Private Lift Access',
            bed: 3,
            bath: 3,
            sqm: 176,
            price:100,
            quantity:1,
            totalPrice:100,
            },
            {
            id:"three2",
            image:"http://theizzara.com/images/layout-s3b2.jpg",
            type: 'B',
            tower: 'Izzara South',
            floor: 'Suites Floor',
            lift: 'Private Lift Access',
            bed: 3,
            bath: 3,
            sqm: 182,
            price:200,
            quantity:1,
            totalPrice:200,
            },
            {
            id:"three3",
            image: "http://theizzara.com/images/layout-s3b3.jpg",
            type: 'C',
            tower: 'Izzara South',
            floor: 'Suites Floor',
            lift: 'Private Lift Access',
            bed: 3,
            bath: 3,
            sqm: 199,
            price:300,
            quantity:1,
            totalPrice:300,
            },
          ]
          },
          four_bedroom:{
           products: [
            {
            id:"four1",
            image: 'http://theizzara.com/images/layout-s4b1.jpg',
            type: 'A',
            tower: 'Izzara South',
            floor: 'Junior Penthouse Floor',
            lift: 'Private Lift Access',
            bed: 4,
            bath: 4,
            sqm: 326,
            price: 600,
            quantity:1,
            totalPrice:600,
            },
            {
            id:"four2",
            image:"http://theizzara.com/images/layout-s4b2.jpg",
            type: 'B',
            tower: 'Izzara South',
            floor: 'Junior Penthouse Floor',
            lift: 'Private Lift Access',
            bed: 4,
            bath: 4,
            sqm: 346,
            price:700,
            quantity:1,
            totalPrice:700,
            },
            {
            id:"four3",
            image: "http://theizzara.com/images/layout-s4b3.jpg",
            type: 'C',
            tower: 'Izzara South',
            floor: 'Junior Penthouse Floor',
            lift: 'Private Lift Access',
            bed: 4,
            bath: 4,
            sqm: 323,
            price:700,
            quantity:1,
            totalPrice:700,
            },
            {
            id:"four4",
            image:"http://theizzara.com/images/layout-s4b4.jpg",
            type:'D',
            tower: 'Izzara South',
            floor: 'Junior Penthouse Floor',
            lift: 'Private Lift Access',
            bed: 4,
            bath: 4,
            sqm: 293,
            price:800,
            quantity:1,
            totalPrice:800,
            },
            ]
          },
          cart:[],
        },
        methods:{
          addToCart: function(data){
            let counter = 0;
            let id = 0;
            this.cart.forEach((v,i,a)=>{
              if(data.id === v.id){
                console.log('heheheh')
                counter +=1;
                id = i-1;
                }
              })
            if(counter >0){
              this.cart[id] += 1;
              this.cart[id+1].quantity += 1;
              this.cart[id+1].totalPrice += data.price;
            } else {
             this.cart.push(1,data)
            }
            counter = 0;
            console.log(this.cart);
            // console.log(data);
          },
          removeFromCart: function(data){
            this.cart.forEach((v,i,a)=>{
              if(v.id === data.id){
                this.cart.splice((i-1),2);
              }
              console.log(this.cart)
            })
          }
        },
        computed:{
          grandTotal: function(){
            let sum = 0;
            this.cart.forEach((v,i,a)=>{
              if(i%2 !== 0){
                sum += v.totalPrice;
              }
            })
            sum = sum*1000;
            let parts = sum.toString().split(".");
            parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            return parts.join(".")
          },
          totalItems:function(){
            let sum = 0;
            // console.log(this.cart)
            this.cart.forEach((v,i,a)=>{
              if(i%2 !== 0){
                sum += v.quantity;
              }
            })
            return sum;
          }
        }
      })
   </script>
</html>